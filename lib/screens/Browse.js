var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _react=_interopRequireDefault(require("react"));var _reactRedux=require("react-redux");var _reactNative=require("react-native");var _indicator=_interopRequireDefault(require("../components/indicator"));var _theme=require("../theme");var _actionTypes=require("../actions/actionTypes");var _this=this,_jsxFileName="/Users/ali/Documents/Projects/javascript/AhangifyTest/app/screens/Browse.js";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var SubCategoryItem=function SubCategoryItem(_ref){var item=_ref.item,onPress=_ref.onPress;return _react.default.createElement(_reactNative.TouchableOpacity,{style:{flex:1,padding:4},__self:_this,__source:{fileName:_jsxFileName,lineNumber:16,columnNumber:3}},_react.default.createElement(_reactNative.View,{style:(0,_extends2.default)({},styles.vStack,{alignItems:'center',padding:4},styles.border),__self:_this,__source:{fileName:_jsxFileName,lineNumber:17,columnNumber:5}},_react.default.createElement(_reactNative.Image,{style:styles.image,source:{uri:""+(item.type==='playlist'?item.item.thumbnail:item.item.cover)},__self:_this,__source:{fileName:_jsxFileName,lineNumber:24,columnNumber:7}}),_react.default.createElement(_reactNative.Text,{style:styles.subCategoryItem,__self:_this,__source:{fileName:_jsxFileName,lineNumber:32,columnNumber:7}},item.type==='playlist'?item.item.title:item.item.name)));};var renderSubCategoryItem=function renderSubCategoryItem(_ref2){var item=_ref2.item;return _react.default.createElement(SubCategoryItem,{item:item,onPress:function onPress(){},__self:_this,__source:{fileName:_jsxFileName,lineNumber:39,columnNumber:10}});};var CategoryItem=function CategoryItem(_ref3){var item=_ref3.item,onPress=_ref3.onPress;return _react.default.createElement(_reactNative.TouchableOpacity,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:43,columnNumber:3}},_react.default.createElement(_reactNative.Text,{style:styles.categoryItem,__self:_this,__source:{fileName:_jsxFileName,lineNumber:44,columnNumber:5}},item.item.name),_react.default.createElement(_reactNative.FlatList,{numColumns:3,data:item.item.items,renderItem:renderSubCategoryItem,keyExtractor:function keyExtractor(item){return item.id;},__self:_this,__source:{fileName:_jsxFileName,lineNumber:45,columnNumber:5}}));};var renderCategoryItem=function renderCategoryItem(_ref4){var item=_ref4.item;return _react.default.createElement(CategoryItem,{item:item,onPress:function onPress(){},__self:_this,__source:{fileName:_jsxFileName,lineNumber:58,columnNumber:10}});};var BrowseScreen=function(_React$Component){(0,_inherits2.default)(BrowseScreen,_React$Component);var _super=_createSuper(BrowseScreen);function BrowseScreen(props){(0,_classCallCheck2.default)(this,BrowseScreen);return _super.call(this,props);}(0,_createClass2.default)(BrowseScreen,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;var navigation=this.props.navigation;console.log('did mount');this.didFocusListener=navigation.addListener('focus',function(){console.log('did focus');_this2.props.getBrowseData();});}},{key:"componentWillUnmount",value:function componentWillUnmount(){console.log('remove focus',this.didFocusListener);this.didFocusListener.remove();}},{key:"render",value:function render(){var data=(0,_extends2.default)({},this.props.data);var isLoading=this.props.isLoading;return _react.default.createElement(_reactNative.View,{style:styles.container,__self:this,__source:{fileName:_jsxFileName,lineNumber:84,columnNumber:7}},isLoading?_react.default.createElement(_indicator.default,{__self:this,__source:{fileName:_jsxFileName,lineNumber:86,columnNumber:11}}):_react.default.createElement(_reactNative.FlatList,{data:data.items,renderItem:renderCategoryItem,keyExtractor:function keyExtractor(item){return item.id;},__self:this,__source:{fileName:_jsxFileName,lineNumber:88,columnNumber:11}}));}}]);return BrowseScreen;}(_react.default.Component);var _default=(0,_reactRedux.connect)(function(state){return{data:state.dataReducer.data,isLoading:state.dataReducer.isLoading};},function(dispatch){return{getBrowseData:function getBrowseData(){return dispatch({type:_actionTypes.GET_BROWSE_DATA});}};})(BrowseScreen);exports.default=_default;var styles=_reactNative.StyleSheet.create({container:{flex:1,flexDirection:'row',alignItems:'flex-start',justifyContent:'center',backgroundColor:'#fff'},categoryItem:{color:'black',fontWeight:'600',fontSize:25,padding:20,marginVertical:8,marginHorizontal:16},subCategoryItem:{color:'black',fontWeight:'400',fontSize:18,marginTop:8},vStack:{flex:1,flexDirection:'column',alignItems:'flex-start'},hStack:{flex:1,flexDirection:'row',alignItems:'flex-start'},image:{height:100,width:100},border:{borderStyle:'solid',borderWidth:0.5,borderRadius:8,borderColor:_theme.primaryColor}});